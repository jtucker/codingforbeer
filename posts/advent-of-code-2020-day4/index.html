<!DOCTYPE html>
<html lang="en"><head>
	
	<meta name="generator" content="Hugo 0.79.1" />
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	
	<meta property="og:title" content="Advent of Code 2020 - Day 4">
	
	
	<meta name="keywords" content="adventofcode,fsharp,code"><meta name="description" content="My thoughts on solving Advent of Code 2020 - Day 4 with F#"><meta property="og:title" content="Advent of Code 2020 - Day 4" />
<meta property="og:description" content="My thoughts on solving Advent of Code 2020 - Day 4 with F#" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://codingfor.beer/posts/advent-of-code-2020-day4/" />
<meta property="article:published_time" content="2020-12-05T16:06:37-05:00" />
<meta property="article:modified_time" content="2020-12-05T16:06:37-05:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Advent of Code 2020 - Day 4"/>
<meta name="twitter:description" content="My thoughts on solving Advent of Code 2020 - Day 4 with F#"/>

	<link rel="stylesheet" type="text/css" media="screen" href="/css/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="/css/main.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="/css/all.css" />
	<title>Advent of Code 2020 - Day 4 | Coding for Beer üçª</title><script type="text/javascript">
		window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src="https://cdn.heapanalytics.com/js/heap-"+e+".js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(r,a);for(var n=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","resetIdentity","removeEventProperty","setEventProperties","track","unsetEventProperty"],o=0;o<p.length;o++)heap[p[o]]=n(p[o])};
		heap.load("2557766162");
	  </script>
</head>
<body><header>
	
	<div id="titletext"><h2 id="title"><a href="https://codingfor.beer">Coding for Beer üçª</a></h2></div>
	<div id="title-description"><div id="social">
			<nav>
				<ul></ul>
			</nav>
		</div>
	</div>
	
</header>
<main><div class="post">
	
	<div class="author">
	
	</div>
	<div class="post-header">
	
		<div class="meta">
			
			<div class="date">
				<span class="day">05</span>
				<span class="rest">Dec 2020</span>
			</div>
			
		</div>
		
		<div class="matter">
			<h1 class="title">Advent of Code 2020 - Day 4</h1>
		</div>
	</div>
	<div class="markdown">
		<h3 id="problem">Problem</h3>
<h4 id="part-1">Part 1</h4>
<blockquote>
<p>The automatic passport scanners are slow because they&rsquo;re having trouble detecting which passports have all required fields. The expected fields are as follows:</p>
</blockquote>
<pre><code>- byr (Birth Year)
- iyr (Issue Year)
- eyr (Expiration Year)
- hgt (Height)
- hcl (Hair Color)
- ecl (Eye Color)
- pid (Passport ID)
- cid (Country ID)
</code></pre>
<blockquote>
<p>Passport data is validated in batch files (your puzzle input). Each passport is represented as a sequence of key:value pairs separated by spaces or newlines. Passports are separated by blank lines.</p>
</blockquote>
<h4 id="part-2">Part 2</h4>
<blockquote>
<p>You can continue to ignore the cid field, but each other field has strict rules about what values are valid for automatic validation:</p>
</blockquote>
<pre><code>- byr (Birth Year) - four digits; at least 1920 and at most 2002.
- iyr (Issue Year) - four digits; at least 2010 and at most 2020.
- eyr (Expiration Year) - four digits; at least 2020 and at most 2030.
- hgt (Height) - a number followed by either cm or in:
- If cm, the number must be at least 150 and at most 193.
- If in, the number must be at least 59 and at most 76.
- hcl (Hair Color) - a # followed by exactly six characters 0-9 or a-f.
- ecl (Eye Color) - exactly one of: amb blu brn gry grn hzl oth.
- pid (Passport ID) - a nine-digit number, including leading zeroes.
- cid (Country ID) - ignored, missing or not.
</code></pre>
<h3 id="solution">Solution</h3>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsi" data-lang="fsi"><span style="color:#204a87;font-weight:bold">open</span> <span style="color:#000">System.Text.RegularExpressions</span>
<span style="color:#204a87;font-weight:bold">open</span> <span style="color:#000">System.Collections.Generic</span>

<span style="color:#204a87;font-weight:bold">type</span> <span style="color:#000">Height</span> <span style="color:#ce5c00;font-weight:bold">=</span>
    <span style="color:#ce5c00;font-weight:bold">|</span> <span style="color:#000">Centimeters</span> <span style="color:#204a87;font-weight:bold">of</span> <span style="color:#000">int</span>
    <span style="color:#ce5c00;font-weight:bold">|</span> <span style="color:#000">Inches</span> <span style="color:#204a87;font-weight:bold">of</span> <span style="color:#000">int</span>
    <span style="color:#ce5c00;font-weight:bold">|</span> <span style="color:#000">NoHeight</span>

<span style="color:#204a87;font-weight:bold">type</span> <span style="color:#000">Passport</span> <span style="color:#ce5c00;font-weight:bold">=</span>
    <span style="color:#ce5c00;font-weight:bold">{</span> <span style="color:#000">PassportId</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">string</span>
      <span style="color:#000">EyeColor</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">string</span>
      <span style="color:#000">Height</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000">Height</span>
      <span style="color:#000">HairColor</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">string</span>
      <span style="color:#000">ExpirationYear</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000">int</span>
      <span style="color:#000">IssueYear</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000">int</span>
      <span style="color:#000">BirthYear</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000">int</span> <span style="color:#ce5c00;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">let</span> <span style="color:#000">processPassports</span> <span style="color:#000">passportList</span> <span style="color:#000">mapper</span> <span style="color:#000">filter</span> <span style="color:#ce5c00;font-weight:bold">=</span>
    <span style="color:#204a87;font-weight:bold">let</span> <span style="color:#000">regexMatch</span> <span style="color:#000">str</span> <span style="color:#ce5c00;font-weight:bold">=</span>
        <span style="color:#204a87;font-weight:bold">let</span> <span style="color:#000">getMatchValue</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">groupName</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">string</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">mtch</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000">Match</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">mtch</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Groups</span><span style="color:#ce5c00;font-weight:bold">.[</span><span style="color:#000">groupName</span><span style="color:#ce5c00;font-weight:bold">].</span><span style="color:#000">Value</span>
        
        <span style="color:#000">Regex</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Matches</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">str</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;(?&lt;Field&gt;</span><span style="color:#a40000">\</span><span style="color:#4e9a06">w+):(?&lt;Value&gt;</span><span style="color:#a40000">\</span><span style="color:#4e9a06">S+)&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
        <span style="color:#ce5c00;font-weight:bold">|&gt;</span> <span style="color:#000">Seq</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">cast</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Match</span><span style="color:#ce5c00;font-weight:bold">&gt;</span>
        <span style="color:#ce5c00;font-weight:bold">|&gt;</span> <span style="color:#000">Seq</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">map</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">fun</span> <span style="color:#000">m</span> <span style="color:#ce5c00;font-weight:bold">-&gt;</span> <span style="color:#ce5c00;font-weight:bold">((</span><span style="color:#000">getMatchValue</span> <span style="color:#4e9a06">&#34;Field&#34;</span> <span style="color:#000">m</span><span style="color:#ce5c00;font-weight:bold">),</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">getMatchValue</span> <span style="color:#4e9a06">&#34;Value&#34;</span> <span style="color:#000">m</span><span style="color:#ce5c00;font-weight:bold">)))</span>

    <span style="color:#000">passportList</span>
    <span style="color:#ce5c00;font-weight:bold">|&gt;</span> <span style="color:#000">Array</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">map</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">regexMatch</span><span style="color:#ce5c00;font-weight:bold">)</span>
    <span style="color:#ce5c00;font-weight:bold">|&gt;</span> <span style="color:#000">Seq</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">map</span> <span style="color:#000">mapper</span>
    <span style="color:#ce5c00;font-weight:bold">|&gt;</span> <span style="color:#000">Seq</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">filter</span> <span style="color:#000">filter</span>
    <span style="color:#ce5c00;font-weight:bold">|&gt;</span> <span style="color:#000">Seq</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">length</span>

<span style="color:#204a87;font-weight:bold">let</span> <span style="color:#000">validPassport</span> <span style="color:#000">p</span> <span style="color:#ce5c00;font-weight:bold">=</span>
    <span style="color:#ce5c00;font-weight:bold">[</span> <span style="color:#4e9a06">&#34;byr&#34;</span>
      <span style="color:#4e9a06">&#34;iyr&#34;</span>
      <span style="color:#4e9a06">&#34;eyr&#34;</span>
      <span style="color:#4e9a06">&#34;hgt&#34;</span>
      <span style="color:#4e9a06">&#34;hcl&#34;</span>
      <span style="color:#4e9a06">&#34;ecl&#34;</span>
      <span style="color:#4e9a06">&#34;pid&#34;</span> <span style="color:#ce5c00;font-weight:bold">]</span>
    <span style="color:#ce5c00;font-weight:bold">|&gt;</span> <span style="color:#000">Seq</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">forall</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">fun</span> <span style="color:#000">x</span> <span style="color:#ce5c00;font-weight:bold">-&gt;</span> <span style="color:#000">Set</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">contains</span> <span style="color:#000">x</span> <span style="color:#000">p</span><span style="color:#ce5c00;font-weight:bold">)</span>

<span style="color:#204a87;font-weight:bold">let</span> <span style="color:#000">requiredFieldsMapper</span> <span style="color:#000">p</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">Set</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ofSeq</span> <span style="color:#000">p</span> <span style="color:#ce5c00;font-weight:bold">|&gt;</span> <span style="color:#000">Set</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">map</span> <span style="color:#000">fst</span>
<span style="color:#204a87;font-weight:bold">let</span> <span style="color:#000">validPassportsRequiredFields</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">processPassports</span> <span style="color:#000">passports</span> <span style="color:#000">requiredFieldsMapper</span> <span style="color:#000">validPassport</span>
<span style="color:#000">printfn</span> <span style="color:#4e9a06">&#34;Answer Part 1: %i passports with all required fields&#34;</span> <span style="color:#000">validPassportsRequiredFields</span>

<span style="color:#204a87;font-weight:bold">let</span> <span style="color:#000">validRulesMapper</span> <span style="color:#000">keyValues</span> <span style="color:#ce5c00;font-weight:bold">=</span>
    <span style="color:#204a87;font-weight:bold">let</span> <span style="color:#000">items</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">keyValues</span> <span style="color:#ce5c00;font-weight:bold">|&gt;</span> <span style="color:#000">Seq</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">distinctBy</span> <span style="color:#000">fst</span> <span style="color:#ce5c00;font-weight:bold">|&gt;</span> <span style="color:#000">dict</span>
    <span style="color:#204a87;font-weight:bold">let</span> <span style="color:#000">getValueOrDefault</span> <span style="color:#000">key</span> <span style="color:#000">defaultValue</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">items</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000">IDictionary</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">string</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">string</span><span style="color:#ce5c00;font-weight:bold">&gt;)</span> <span style="color:#ce5c00;font-weight:bold">=</span>
        <span style="color:#204a87;font-weight:bold">match</span> <span style="color:#000">items</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">TryGetValue</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">key</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#204a87;font-weight:bold">with</span>
        <span style="color:#ce5c00;font-weight:bold">|</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">x</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">-&gt;</span> <span style="color:#000">x</span>
        <span style="color:#ce5c00;font-weight:bold">|</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#ce5c00;font-weight:bold">_)</span> <span style="color:#ce5c00;font-weight:bold">-&gt;</span> <span style="color:#000">defaultValue</span>
    <span style="color:#204a87;font-weight:bold">let</span> <span style="color:#000">height</span> <span style="color:#000">s</span> <span style="color:#ce5c00;font-weight:bold">=</span>
        <span style="color:#204a87;font-weight:bold">let</span> <span style="color:#000">mtch</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">Regex</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Match</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">s</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;(?&lt;value&gt;</span><span style="color:#a40000">\</span><span style="color:#4e9a06">d+)(?&lt;measurement&gt;(in|cm))&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
        <span style="color:#204a87;font-weight:bold">match</span> <span style="color:#000">mtch</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Success</span> <span style="color:#204a87;font-weight:bold">with</span>
        <span style="color:#ce5c00;font-weight:bold">|</span> <span style="color:#204a87;font-weight:bold">true</span> <span style="color:#ce5c00;font-weight:bold">-&gt;</span>
            <span style="color:#204a87;font-weight:bold">match</span> <span style="color:#000">mtch</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Groups</span><span style="color:#ce5c00;font-weight:bold">.[</span><span style="color:#4e9a06">&#34;measurement&#34;</span><span style="color:#ce5c00;font-weight:bold">].</span><span style="color:#000">Value</span> <span style="color:#204a87;font-weight:bold">with</span>
            <span style="color:#ce5c00;font-weight:bold">|</span> <span style="color:#4e9a06">&#34;in&#34;</span> <span style="color:#ce5c00;font-weight:bold">-&gt;</span> <span style="color:#000">Inches</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">mtch</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Groups</span><span style="color:#ce5c00;font-weight:bold">.[</span><span style="color:#4e9a06">&#34;value&#34;</span><span style="color:#ce5c00;font-weight:bold">].</span><span style="color:#000">Value</span> <span style="color:#ce5c00;font-weight:bold">|&gt;</span> <span style="color:#000">int</span><span style="color:#ce5c00;font-weight:bold">)</span>
            <span style="color:#ce5c00;font-weight:bold">|</span> <span style="color:#4e9a06">&#34;cm&#34;</span> <span style="color:#ce5c00;font-weight:bold">-&gt;</span> <span style="color:#000">Centimeters</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">mtch</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Groups</span><span style="color:#ce5c00;font-weight:bold">.[</span><span style="color:#4e9a06">&#34;value&#34;</span><span style="color:#ce5c00;font-weight:bold">].</span><span style="color:#000">Value</span> <span style="color:#ce5c00;font-weight:bold">|&gt;</span> <span style="color:#000">int</span><span style="color:#ce5c00;font-weight:bold">)</span>
            <span style="color:#ce5c00;font-weight:bold">|</span> <span style="color:#ce5c00;font-weight:bold">_</span> <span style="color:#ce5c00;font-weight:bold">-&gt;</span> <span style="color:#000">NoHeight</span>
        <span style="color:#ce5c00;font-weight:bold">|</span> <span style="color:#204a87;font-weight:bold">false</span> <span style="color:#ce5c00;font-weight:bold">-&gt;</span> <span style="color:#000">NoHeight</span>

    <span style="color:#ce5c00;font-weight:bold">{</span> <span style="color:#000">PassportId</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">getValueOrDefault</span> <span style="color:#4e9a06">&#34;pid&#34;</span> <span style="color:#4e9a06">&#34;&#34;</span> <span style="color:#000">items</span>
      <span style="color:#000">EyeColor</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">getValueOrDefault</span> <span style="color:#4e9a06">&#34;ecl&#34;</span> <span style="color:#4e9a06">&#34;&#34;</span> <span style="color:#000">items</span>
      <span style="color:#000">Height</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">getValueOrDefault</span> <span style="color:#4e9a06">&#34;hgt&#34;</span> <span style="color:#4e9a06">&#34;&#34;</span> <span style="color:#000">items</span> <span style="color:#ce5c00;font-weight:bold">|&gt;</span> <span style="color:#000">height</span>
      <span style="color:#000">HairColor</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">getValueOrDefault</span> <span style="color:#4e9a06">&#34;hcl&#34;</span> <span style="color:#4e9a06">&#34;&#34;</span> <span style="color:#000">items</span>
      <span style="color:#000">ExpirationYear</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">getValueOrDefault</span> <span style="color:#4e9a06">&#34;eyr&#34;</span> <span style="color:#4e9a06">&#34;0&#34;</span> <span style="color:#000">items</span> <span style="color:#ce5c00;font-weight:bold">|&gt;</span> <span style="color:#000">int</span>
      <span style="color:#000">IssueYear</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">getValueOrDefault</span> <span style="color:#4e9a06">&#34;iyr&#34;</span> <span style="color:#4e9a06">&#34;0&#34;</span> <span style="color:#000">items</span> <span style="color:#ce5c00;font-weight:bold">|&gt;</span> <span style="color:#000">int</span>
      <span style="color:#000">BirthYear</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">getValueOrDefault</span> <span style="color:#4e9a06">&#34;byr&#34;</span> <span style="color:#4e9a06">&#34;0&#34;</span> <span style="color:#000">items</span> <span style="color:#ce5c00;font-weight:bold">|&gt;</span> <span style="color:#000">int</span> <span style="color:#ce5c00;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">let</span> <span style="color:#000">validRulesFilter</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">p</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000">Passport</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> 
    <span style="color:#204a87;font-weight:bold">let</span> <span style="color:#000">str</span> <span style="color:#000">r</span> <span style="color:#000">s</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">Regex</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">IsMatch</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">s</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">r</span><span style="color:#ce5c00;font-weight:bold">)</span>
    <span style="color:#204a87;font-weight:bold">let</span> <span style="color:#000">isBetween</span> <span style="color:#000">f</span> <span style="color:#000">l</span> <span style="color:#000">v</span> <span style="color:#ce5c00;font-weight:bold">=</span>
        <span style="color:#000">v</span> <span style="color:#ce5c00;font-weight:bold">&gt;=</span> <span style="color:#000">f</span> <span style="color:#ce5c00;font-weight:bold">&amp;&amp;</span> <span style="color:#000">v</span> <span style="color:#ce5c00;font-weight:bold">&lt;=</span> <span style="color:#000">l</span>

    <span style="color:#204a87;font-weight:bold">let</span> <span style="color:#000">validHeight</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">function</span>
        <span style="color:#ce5c00;font-weight:bold">|</span> <span style="color:#000">Inches</span> <span style="color:#000">i</span> <span style="color:#204a87;font-weight:bold">when</span> <span style="color:#000">i</span> <span style="color:#ce5c00;font-weight:bold">|&gt;</span> <span style="color:#000">isBetween</span> <span style="color:#000">59</span> <span style="color:#000">76</span> <span style="color:#ce5c00;font-weight:bold">-&gt;</span> <span style="color:#204a87;font-weight:bold">true</span>
        <span style="color:#ce5c00;font-weight:bold">|</span> <span style="color:#000">Centimeters</span> <span style="color:#000">c</span> <span style="color:#204a87;font-weight:bold">when</span> <span style="color:#000">c</span> <span style="color:#ce5c00;font-weight:bold">|&gt;</span> <span style="color:#000">isBetween</span> <span style="color:#000">150</span> <span style="color:#000">193</span> <span style="color:#ce5c00;font-weight:bold">-&gt;</span> <span style="color:#204a87;font-weight:bold">true</span>
        <span style="color:#ce5c00;font-weight:bold">|</span> <span style="color:#ce5c00;font-weight:bold">_</span> <span style="color:#ce5c00;font-weight:bold">-&gt;</span> <span style="color:#204a87;font-weight:bold">false</span>
        
    <span style="color:#204a87;font-weight:bold">let</span> <span style="color:#000">eye</span>  <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">function</span>
        <span style="color:#ce5c00;font-weight:bold">|</span> <span style="color:#4e9a06">&#34;amb&#34;</span> <span style="color:#ce5c00;font-weight:bold">|</span> <span style="color:#4e9a06">&#34;blu&#34;</span> <span style="color:#ce5c00;font-weight:bold">|</span> <span style="color:#4e9a06">&#34;brn&#34;</span> <span style="color:#ce5c00;font-weight:bold">|</span> <span style="color:#4e9a06">&#34;gry&#34;</span> <span style="color:#ce5c00;font-weight:bold">|</span> <span style="color:#4e9a06">&#34;grn&#34;</span> <span style="color:#ce5c00;font-weight:bold">|</span> <span style="color:#4e9a06">&#34;hzl&#34;</span> <span style="color:#ce5c00;font-weight:bold">|</span> <span style="color:#4e9a06">&#34;oth&#34;</span> <span style="color:#ce5c00;font-weight:bold">-&gt;</span> <span style="color:#204a87;font-weight:bold">true</span>
        <span style="color:#ce5c00;font-weight:bold">|</span> <span style="color:#ce5c00;font-weight:bold">_</span> <span style="color:#ce5c00;font-weight:bold">-&gt;</span> <span style="color:#204a87;font-weight:bold">false</span>

    <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">p</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">PassportId</span> <span style="color:#ce5c00;font-weight:bold">|&gt;</span> <span style="color:#000">str</span> <span style="color:#4e9a06">&#34;^</span><span style="color:#a40000">\</span><span style="color:#4e9a06">d{9}$&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">&amp;&amp;</span>
    <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">p</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">EyeColor</span> <span style="color:#ce5c00;font-weight:bold">|&gt;</span> <span style="color:#000">eye</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">&amp;&amp;</span>
    <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">p</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">HairColor</span> <span style="color:#ce5c00;font-weight:bold">|&gt;</span> <span style="color:#000">str</span> <span style="color:#4e9a06">&#34;^#([0-9a-fA-F]){6}$&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">&amp;&amp;</span>
    <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">p</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">ExpirationYear</span> <span style="color:#ce5c00;font-weight:bold">|&gt;</span> <span style="color:#000">isBetween</span> <span style="color:#000">2020</span> <span style="color:#000">2030</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">&amp;&amp;</span>
    <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">p</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">IssueYear</span> <span style="color:#ce5c00;font-weight:bold">|&gt;</span> <span style="color:#000">isBetween</span> <span style="color:#000">2010</span> <span style="color:#000">2020</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">&amp;&amp;</span>
    <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">p</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">BirthYear</span> <span style="color:#ce5c00;font-weight:bold">|&gt;</span> <span style="color:#000">isBetween</span> <span style="color:#000">1920</span> <span style="color:#000">2002</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">&amp;&amp;</span>
    <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">p</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Height</span> <span style="color:#ce5c00;font-weight:bold">|&gt;</span> <span style="color:#000">validHeight</span><span style="color:#ce5c00;font-weight:bold">)</span>

<span style="color:#204a87;font-weight:bold">let</span> <span style="color:#000">validPassportsByRules</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">processPassports</span> <span style="color:#000">passports</span> <span style="color:#000">validRulesMapper</span> <span style="color:#000">validRulesFilter</span>
<span style="color:#000">printfn</span> <span style="color:#4e9a06">&#34;Answer Part 2: %i passports with based on rules&#34;</span> <span style="color:#000">validPassportsByRules</span></code></pre></div>
<h3 id="thoughts-on-why-i-did-what-i-did">Thoughts on why I did what I did</h3>
<p>It&rsquo;s all about the Regex and learning about <a href="https://fsharp.github.io/fsharp-core-docs/reference/fsharp-collections-fsharpset-1.html" target="_blank">Set type</a> in the language. I again initially would have liked to have tried using <code>FParsec</code> but was a little apprehensive on it, so I opt&rsquo;d against it.</p>
<p>For Part 1 using the <code>Set</code> type made making sure there weren&rsquo;t any duplicate Field/Value pairs easy and operates just like you would expect a collection to. So once I knew I had a list of pairs that were unique it was a simple call to make sure that all the required fields were present in the passport line and then filtering out all the ones that didn&rsquo;t.</p>
<p>For Part 2, the bulk of the work was really constructing the <code>Passport</code>  type I defined. This felt very much in the imperative style I normally would use in my day to day but I couldn&rsquo;t really think of another more functional way of doing it. Once all the lines were made into <code>Passport</code>  types it came down to just filtering out all the invalid <code>Passport</code>s based on the rules.</p>

	</div>
	
	
	
	
	
		
	
	
	
	<div class="tags">
		<div class="taxosfloating_left">
			<p>Series</p>
		</div>
		<div class="termsfloating_right">
			<p>
			
			
			
			
			
			<a href="/series/advent-of-code-2020/"> advent-of-code-2020 </a>
			
			
			
			
			
			
			
			
			
			</p>
		</div>
		<div class="clearit"></div>
		
		
		
		
	
	
	
	<div class="tags">
		<div class="taxosfloating_left">
			<p>Tags</p>
		</div>
		<div class="termsfloating_right">
			<p>
			
			
			
			
			
			<a href="/tags/adventofcode/"> adventofcode </a>
			
			
			
			
			
			
			
			
			
			
			
			
			
			<a href="/tags/code/"> code </a>
			
			
			
			
			
			
			
			
			
			
			
			
			
			<a href="/tags/fsharp/"> fsharp </a>
			
			
			
			
			
			
			
			
			
			</p>
		</div>
		<div class="clearit"></div>
		
		
		
		
		
	</div>
<script src="https://utteranc.es/client.js"
        repo="jtucker/codingforbeer"
        issue-term="og:title"
        theme="boxy-light"
        crossorigin="anonymous"
        async>
</script>

</div>

  </main>





</body>
</html>
